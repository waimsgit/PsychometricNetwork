<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<title>专业视频</title>
		<link rel="stylesheet" type="text/css" href="css/commone.css" />
		<link rel="stylesheet" type="text/css" href="css/style.css" />
		<link rel="stylesheet" type="text/css" href="css/video.css" />
		<link rel="stylesheet" type="text/css" href="css/Safari.css" />
		<link rel="stylesheet" type="text/css" href="css/professionVideo.css" />
		<script src="js/jquery.min.js"></script>
		<script src="https://cdn.jsdelivr.net/npm/vue"></script>
		<script src="js/public.js"></script>
	</head>

	<body>
		<div class="main">
		<div class="container">
			<!--左边导航内容-->
			<div id="side"></div>

			<div class="right" id="video">
                <div class="contentarea">
                	<!--视频购买区-->
                 	<div class="content1">
                 		<div class="content1-left">
                 			<img id="iepsyimg" :src="'http://www.iepsy.com/'+scoure.img" alt="" />
                 		</div>
                 		<div class="content1-right">
                 			<h3 id="iepsytitle">{{scoure.title}}</h3>
                 			<div>
                 				<ul>
                 					<li>456 人购买</li>
                 					<li>时长：{{scoure.duration}}分</li>
                 				</ul>
                 				<p>
                 					<img src="img/eye.png" alt="" /><span>分享</span>
                 					<div id="tol">
										<img src="img/professionVideolike1.png" alt="" id="gray"/>
									</div>
									<p class="collect">收藏</p>
                 				</p>
                 			</div>
                 			<div><h4 id="price">￥{{scoure.price}} </h4> <a class="buy">立&nbsp;即&nbsp;购&nbsp;买</a></div>
                 		</div>
                 	</div>
                 	</div>
                 	
                 	
                 	<!--课程介绍和主讲老师区-->
                 	<div class="contentarea">
                 	<div class="content2">
                 		<div class="content2-left">
                 			<div class="content2-left1">
                 				<h5>课程介绍 <span></span> </h5>
	                 			<p>{{scoure.text}}</p>
	                 			<h5>课程列表 <span></span></h5>
	                 			<ul>
	                 				<li v-for="(item,index) in scoure.chapter"><a href="">{{item.title}}<img src="img/professionVideoplay.png" alt="" /> </a></li>
	                 			</ul>
                 			</div>
                 		</div>
                 		
                 		<div class="content2-right">
                 			<div class="content2-right1">
                 				<h5>主讲老师 </h5>
                 				<div><img src="img/figuretwo.png" alt="" /><span>周辰</span> </div>
                 				<p>韦氏资深测评师，实操讲师。首都儿科研究所《对高原藏族和汉族居民的神经发育和认知功能的评估》项目认知测评师。参与适应行为评定量表幼儿版第二版中文版的采样工作。韦氏成人/儿童/幼儿智力量表中文版测评师，适应行为评定量表儿童版第二版中文版测评师。</p>
                 			</div>
                 		
                 			<div class="content2-right2">
                 				<h5>相关课程 </h5>
                 				<div>
                 					<img src="img/video02.png" alt="" />
                 				    <p>男性的产后抑郁</p>
                 				    <p> <span>￥2100</span> <span>1122人已购买</span></p>
                 				    <a href="">立即查看</a>
                 				</div>
                 			</div>
                 		</div>
                </div>
                </div>
			
				<div class="notarize">
					<h5>是否生成订单？</h5>
					<p class="open"><button onclick="createOrder()">确认</button></p>
					<p class="close">取消</p>
				</div>
					
			</div>  <!--right的结尾标签-->
			<div class="clear"></div>
		</div>
		<!--container的结尾标签-->
        			
		</div>  <!--main的结尾标签-->
		
		<!--版权-->
		<div class="right-footer">
			<div class="right-footer-content">
				骄阳智心 版权所有 2010-2019&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;京ICP备17000866&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;京公网安备11010802023632号
			</div>
		</div>

        
        <!--引入公共部分的js-->
		<script>
			$(function(){
				$("#side").load("side.html",function(){
			 		$("#icon4").attr("src","img/icon4_4.png");
			 	});
			})
		</script>
		
		<!--收藏-->
		<script>
			$('#tol').click(function(){
				if($("#gray").attr('src')=='img/professionVideolike1.png'){
					$(this).find('img').attr('src','img/professionVideolike2.png');
				}else{
					$(this).find('img').attr('src','img/professionVideolike1.png');
				}
			});
		</script>

        <!--确认是否购买弹框-->
		<script>
			$(function(){
				$(".buy").click(function(){
					$(".notarize").show()
				})
				$(".close").click(function(){
					$(".notarize").hide()
				})
			})
		</script>
   </body>
   <script>
   	function createOrder(){
   		var id = getQueryString("id");
   		var imgpath = $("#iepsyimg").attr("src");
   		var title = $("#iepsytitle").text();
   		var price = $("#price").text();
   		$.ajax({
			type:"post",
			url:url1+"/scale/post/order",
			//url:"http://192.168.1.173:8886/scale/get/scoures",
			data:{"scoureId":id, "orderAmount":vm.scoure.price},
			dataType:"json",
			//TODO token值
			headers:{'token':'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJhdWQiOlsiMTg1MTEwMTQ2NjJAMTYzLmNvbSIsIjgiXX0.Ekotd0bKVCz6YA1kZUgu5xNgouAHa714nz9VNOs_Lsc'},
			async:true,
			success:function (result){
				if(result.status == 200){
					vm.scoure = result.data;
					//console.log(encodeURI('videoOrderform.html?id='+result.data.orderNumber+"&img="+imgpath+"&title="+title+"&price="+price))
					window.open(encodeURI('videoOrderform.html?id='+result.data.orderNumber+"&img="+imgpath+"&title="+title+"&price="+price),'_blank')
					console.log(result.data);
					
					
				}else{
					alert(result.message)
				}
			}
		});
   	}
   	function getQueryString(name) {
	    var reg = new RegExp('(^|&)' + name + '=([^&]*)(&|$)', 'i');
	    var r = window.location.search.substr(1).match(reg);
	    if (r != null) {
	        return unescape(r[2]);
	    }
	    return null;
	}
   	var url1 = geturl();
   	$(function(){
   		var id = getQueryString("id");
		$.ajax({
			type:"get",
			url:url1+"/scale/get/scoure/"+id,
			//url:"http://192.168.1.173:8886/scale/get/scoures",
			async:true,
			success:function (result){
				if(result.status == 200){
					vm.scoure = result.data;
					console.log(result.data)
				}else{
					alert(result.message)
				}
			}
		});
	})
   	
	var vm = new Vue({
		el: "#video",
		data: {
			scoure:{}
		},
		methods:{
			
		}
	});
   </script>
</html>